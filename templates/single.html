{% extends "base.html" %}

{% block title %}Single Analysis - Sentiment Analysis System{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/analysis.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>Single Comment Analysis</h1>
        <p>Input comment content to identify sentiment and key entities</p>
    </div>

    {% if not show_result %}
    <!-- Input Form -->
    <div class="single-form">
        <label for="commentText">Comment Content</label>
        <textarea id="commentText" rows="6" placeholder="Enter the comment to analyze..."></textarea>

        <button id="analyzeBtn" class="btn-primary">
            <span>🔍</span>
            <span>Start Analysis</span>
        </button>

        <div id="loadingMessage" class="loading-message" style="display: none;">
            <div class="spinner"></div>
            <p>Analyzing...</p>
        </div>
    </div>
    {% else %}
    <!-- Analysis Results -->
    <div class="result-card">
        <div class="result-icon">
            {% if analysis.sentiment == '正面' %}
            <span style="font-size: 4rem;">😊</span>
            {% elif analysis.sentiment == '负面' %}
            <span style="font-size: 4rem;">😞</span>
            {% else %}
            <span style="font-size: 4rem;">😐</span>
            {% endif %}
        </div>

        <h2 class="sentiment-{{ analysis.sentiment }}">
            {% if analysis.sentiment == '正面' %}Positive
            {% elif analysis.sentiment == '负面' %}Negative
            {% else %}Neutral{% endif %}
        </h2>

        <div class="result-details">
            <div class="detail-item">
                <label>Comment Content</label>
                <div class="content-box">{{ analysis.content }}</div>
            </div>

            <div class="detail-item">
                <label>Analysis Time</label>
                <p class="timestamp">{{ analysis.created_at.strftime('%d/%m/%Y %H:%M:%S') }}</p>
            </div>
        </div>

        <div class="result-actions">
            <button onclick="location.href='{{ url_for('main.single') }}'" class="btn-primary">
                <span>🔄</span>
                <span>Analyze Again</span>
            </button>
            <button onclick="location.href='{{ url_for('main.history') }}'" class="btn-secondary">
                <span>📜</span>
                <span>View History</span>
            </button>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/single.js') }}"></script>
{% endblock %}
